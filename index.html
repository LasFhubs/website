<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Ferramentas de Scripts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #1e1e1e;
        color: #fafafa;
        margin: 0;
        padding: 0;
      }
      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 60px;
      }
      .buttons {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
      }
      button {
        background: #2127c0;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 18px 32px;
        font-size: 1.1em;
        cursor: pointer;
        transition: background 0.2s;
      }
      button:hover {
        background: #424be5;
      }
      .content-area {
        min-height: 220px;
        width: 400px;
        background: #232323;
        border-radius: 10px;
        padding: 32px;
        box-shadow: 0 4px 16px #0004;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.15em;
      }
      .hidden { display: none; }
      .ls-label, .obf-label {
        margin-bottom: 12px;
        font-size: 1.08em;
        display: block;
      }
      .ls-input, .obf-input {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: none;
        font-size: 1em;
        margin-bottom: 16px;
        box-sizing: border-box;
        resize: vertical;
      }
      .ls-output-area, .obf-output-area {
        background: #181818;
        border-radius: 6px;
        padding: 12px;
        font-family: "Fira Mono", "Consolas", monospace;
        color: #2127c0;
        word-break: break-all;
        min-height: 60px;
      }
      .ls-copy-btn, .obf-copy-btn {
        background: #2127c0;
        color: #fff;
        border: none;
        padding: 7px 16px;
        font-size: 1em;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 12px;
        transition: background 0.2s;
      }
      .ls-copy-btn:hover, .obf-copy-btn:hover {
        background: #424be5;
      }
      .executores-soon {
        color: #2127c0;
        font-size: 1.5em;
        font-weight: bold;
        text-align: center;
        width: 100%;
      }
      .obf-warning {
        color: #ffc107;
        margin-bottom: 10px;
        font-size: 0.98em;
        text-align: left;
        display: block;
      }
      .scripthub-links {
        display: flex;
        flex-direction: column;
        gap: 18px;
        width: 100%;
        align-items: center;
      }
      .scripthub-card {
        background: #181a37;
        border-radius: 8px;
        padding: 18px 20px;
        width: 90%;
        box-shadow: 0 2px 6px #0003;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }
      .scripthub-link {
        text-decoration: none;
        color: #fff;
        font-weight: bold;
        font-size: 1.12em;
        margin-bottom: 6px;
        word-break: break-all;
      }
      .scripthub-desc {
        color: #bfcfff;
        font-size: 0.97em;
      }
      @media (max-width: 600px) {
        .content-area {
          width: 90vw;
          padding: 16px;
        }
        .buttons {
          flex-direction: column;
          gap: 12px;
        }
        .scripthub-card {
          width: 100%;
          padding: 12px 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="buttons">
        <button id="btn-loadstring">LoadString</button>
        <button id="btn-executores">Executores</button>
        <button id="btn-obfuscator">Obfuscator</button>
        <button id="btn-scripthub">ScriptHub</button>
      </div>
      <div class="content-area" id="content-area">
        Clique em um dos botões acima para começar.
      </div>
    </div>
    <script>
      const contentArea = document.getElementById('content-area');

      function renderLoadString() {
        contentArea.innerHTML = `
          <form id="ls-form" autocomplete="off" style="width: 100%;">
            <label class="ls-label" for="ls-input">
              Cole aqui o link ou texto para ser usado no <b>loadstring</b>:
            </label>
            <input id="ls-input" class="ls-input" type="text" placeholder="Insira aqui o link do script" spellcheck="false" />
            <div id="ls-output" class="ls-output-area" style="margin-bottom:8px;">loadstring(game:HttpGet(""))()</div>
            <button type="button" id="ls-copy" class="ls-copy-btn">Copiar</button>
          </form>
        `;

        const input = document.getElementById('ls-input');
        const output = document.getElementById('ls-output');
        const copyBtn = document.getElementById('ls-copy');

        input.addEventListener('input', function() {
          const userValue = input.value.replace(/"/g, '\\"');
          output.textContent = `loadstring(game:HttpGet("${userValue}"))()`;
        });

        copyBtn.addEventListener('click', function() {
          navigator.clipboard.writeText(output.textContent)
            .then(() => {
              copyBtn.textContent = 'Copiado!';
              setTimeout(() => copyBtn.textContent = 'Copiar', 1200);
            });
        });
      }

      function renderExecutores() {
        contentArea.innerHTML = `<div class="executores-soon">Em breve!</div>`;
      }

      function obfuscateLua(code) {
        // Remove comentários de linha simples
        let res = code.replace(/--.*$/gm, "");
        // Remove linhas em branco
        res = res.replace(/^\s*[\r\n]/gm, "");
        // Troca variáveis globais/comuns por nomes curtos (apenas exemplo)
        const mapVars = {};
        let varCount = 0;
        res = res.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g, function(match) {
          const reserved = [
            "and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while"
          ];
          if (reserved.includes(match)) return match;
          if (!mapVars[match]) {
            mapVars[match] = "_" + (++varCount).toString(36);
          }
          return mapVars[match];
        });
        res = res.replace(/[ \t]+/g, " ");
        res = res.replace(/\s*([\(\)\{\}\[\]])\s*/g, "$1");
        res = res.replace(/[\r\n]+/g, " ");
        return res.trim();
      }

      function renderObfuscator() {
        contentArea.innerHTML = `
          <form id="obf-form" autocomplete="off" style="width: 100%;">
            <span class="obf-warning">Talvez não funcione com alguns códigos :\\</span>
            <label class="obf-label" for="obf-input">
              Cole seu código Lua abaixo para ser ofuscado:
            </label>
            <textarea id="obf-input" class="obf-input" rows="6" placeholder="Digite ou cole seu código Lua aqui..."></textarea>
            <div id="obf-output" class="obf-output-area" style="margin-bottom:8px;"></div>
            <button type="button" id="obf-copy" class="obf-copy-btn">Copiar</button>
          </form>
        `;

        const input = document.getElementById('obf-input');
        const output = document.getElementById('obf-output');
        const copyBtn = document.getElementById('obf-copy');

        input.addEventListener('input', function() {
          output.textContent = obfuscateLua(input.value);
        });

        copyBtn.addEventListener('click', function() {
          navigator.clipboard.writeText(output.textContent)
            .then(() => {
              copyBtn.textContent = 'Copiado!';
              setTimeout(() => copyBtn.textContent = 'Copiar', 1200);
            });
        });
      }

      function renderScriptHub() {
        contentArea.innerHTML = `
          <div class="scripthub-links">
            <div class="scripthub-card">
              <a class="scripthub-link" href="https://rscripts.net/" target="_blank">R-Scripts</a>
              <span class="scripthub-desc">Biblioteca online de scripts para Roblox.</span>
            </div>
            <div class="scripthub-card">
              <a class="scripthub-link" href="https://rbxscript.com/" target="_blank">RBXScript</a>
              <span class="scripthub-desc">Scripts, utilidades e recursos para Roblox.</span>
            </div>
            <div class="scripthub-card">
              <a class="scripthub-link" href="https://scriptblox.com/" target="_blank">ScriptBlox</a>
              <span class="scripthub-desc">Plataforma para compartilhar e encontrar scripts de Roblox.</span>
            </div>
          </div>
        `;
      }

      document.getElementById('btn-loadstring').onclick = renderLoadString;
      document.getElementById('btn-executores').onclick = renderExecutores;
      document.getElementById('btn-obfuscator').onclick = renderObfuscator;
      document.getElementById('btn-scripthub').onclick = renderScriptHub;
    </script>
  </body>
</html>
